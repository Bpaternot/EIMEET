<h1> <%= @tournament.user.username %>'s tournament</h1>
  <p>
    Organized by: <%= @tournament.user.username %><br>
    Date: <%= @tournament.date %><br>
    Bar's name: <%= @tournament.bar.name %><br>
    Tournament's type: <%= @tournament.tournament_type %><br>
    Total number of players: <%= @tournament.number_players %><br>
    Total number of remaining spots : <br>
    Number of consoles needed: <%= @tournament.number_consoles %><br>
    Total number of games that will be played: <%= @tournament.number_games %><br>
    Players list:
    <% @tournament.players.each do |player| %>
      <p>
        <%= player.user.username %><br>
      </p>
    <% end %>
    <br>

  Want to join?
  <%= simple_form_for [@tournament, @player] do |f| %>
    <%= f.submit "Join" %>
  <% end %>


  </p>

<div id="map" style="width: 100%; height: 600px;"></div>

<% content_for(:after_js) do %>
  <%= javascript_tag do %>
    $(document).ready(function() {
      var handler = Gmaps.build('Google');
      handler.buildMap({ internal: { id: 'map' } }, function() {
        markers = handler.addMarkers(<%= raw @hash.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
        if (markers.length == 0) {
          handler.getMap().setZoom(2);
        } else if (markers.length == 1) {
          handler.getMap().setZoom(14);
        }
      });
    });
  <% end %>
<% end %>
